From 138117810c7541e8f281f7adc6c3094d90d5c4f4 Mon Sep 17 00:00:00 2001
From: hmz007 <hmz007@gmail.com>
Date: Fri, 6 Nov 2020 16:33:28 +0800
Subject: [PATCH 4/7] arm64: dts: rockchip: Add board node for nanopi4

Signed-off-by: hmz007 <hmz007@gmail.com>
---
 arch/arm64/boot/dts/rockchip/rk3399-nanopc-t4.dts   | 5 +++++
 arch/arm64/boot/dts/rockchip/rk3399-nanopi-m4.dts   | 5 +++++
 arch/arm64/boot/dts/rockchip/rk3399-nanopi-neo4.dts | 5 +++++
 arch/arm64/boot/dts/rockchip/rk3399-nanopi4.dtsi    | 7 +++++++
 4 files changed, 22 insertions(+)

diff --git a/arch/arm64/boot/dts/rockchip/rk3399-nanopc-t4.dts b/arch/arm64/boot/dts/rockchip/rk3399-nanopc-t4.dts
index e0d75617bb7e..63347c8bdb59 100644
--- a/arch/arm64/boot/dts/rockchip/rk3399-nanopc-t4.dts
+++ b/arch/arm64/boot/dts/rockchip/rk3399-nanopc-t4.dts
@@ -94,6 +94,11 @@ map3 {
 	};
 };
 
+&mach {
+	hwrev = <0>;
+	model = "NanoPC-T4";
+};
+
 &pcie0 {
 	num-lanes = <4>;
 	vpcie3v3-supply = <&vcc3v3_sys>;
diff --git a/arch/arm64/boot/dts/rockchip/rk3399-nanopi-m4.dts b/arch/arm64/boot/dts/rockchip/rk3399-nanopi-m4.dts
index 60358ab8c7df..814fcfec1b65 100644
--- a/arch/arm64/boot/dts/rockchip/rk3399-nanopi-m4.dts
+++ b/arch/arm64/boot/dts/rockchip/rk3399-nanopi-m4.dts
@@ -48,6 +48,11 @@ vcc5v0_usb2: vcc5v0-usb2 {
 	};
 };
 
+&mach {
+	hwrev = <0x21>;
+	model = "NanoPi M4";
+};
+
 &vcc3v3_sys {
 	vin-supply = <&vcc5v0_core>;
 };
diff --git a/arch/arm64/boot/dts/rockchip/rk3399-nanopi-neo4.dts b/arch/arm64/boot/dts/rockchip/rk3399-nanopi-neo4.dts
index 195410b089b9..8e4734b91347 100644
--- a/arch/arm64/boot/dts/rockchip/rk3399-nanopi-neo4.dts
+++ b/arch/arm64/boot/dts/rockchip/rk3399-nanopi-neo4.dts
@@ -36,6 +36,11 @@ vcc5v0_usb1: vcc5v0-usb1 {
 	};
 };
 
+&mach {
+	hwrev = <4>;
+	model = "NanoPi NEO4";
+};
+
 &vcc3v3_sys {
 	vin-supply = <&vcc5v0_core>;
 };
diff --git a/arch/arm64/boot/dts/rockchip/rk3399-nanopi4.dtsi b/arch/arm64/boot/dts/rockchip/rk3399-nanopi4.dtsi
index cb9589277e73..bf39d6192f8b 100644
--- a/arch/arm64/boot/dts/rockchip/rk3399-nanopi4.dtsi
+++ b/arch/arm64/boot/dts/rockchip/rk3399-nanopi4.dtsi
@@ -22,6 +22,13 @@ chosen: chosen {
 		stdout-path = "serial2:1500000n8";
 	};
 
+	mach: board {
+		compatible = "friendlyelec,board";
+		machine = "NANOPI4";
+		hwrev = <255>;
+		model = "NanoPi 4 Series";
+	};
+
 	clkin_gmac: external-gmac-clock {
 		compatible = "fixed-clock";
 		clock-frequency = <125000000>;
-- 
2.31.1

